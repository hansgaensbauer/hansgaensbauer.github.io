<!DOCTYPE html>
<html>
<head>
  <title>Hans Gaensbauer - Code</title>
  <link rel="icon" href="favicon.png" type="image/gif" sizes="16x16">
  <link rel="stylesheet" type="text/css" href="styling.css" />
  <link rel="stylesheet" type="text/css" href="prism.css" />
  <script type="text/javascript" src="prism.js"></script>
  <script type="text/javascript" src="everything.js"></script>
</head>
<body>
  <table id="menu">
  <td id="test">
    <a href="index.html" class = "hiddenlink"><h1>Hans Gaensbauer - Code</h1></a>
  <td>
    <ul id="menulist">
      <li class = "menuitem"><a href="politics.html">Politics</a></li>
      <li class = "menuitem"><a href="projects.html">Projects</a></li>
      <li class = "menuitem"><a href="code.html">Code</a></li>
      <li class = "menuitem"><a href="index.html">About</a></li>
    </ul>
  </td>
  </table>
  <div id= "contentsdiv">
    <h2 class = "contents">Contents</h2>
    <ul class = "contentslist">
      <li onclick="linkt('style')">How To Style this Page</li>
      <li onclick="linkt('obvious')">A Quick Note on Grammar</li>
      <li onclick="linkt('mindcraft')">Mindcraft Server</li>
      <li onclick="linkt('kandao')">kandao (看到)</li>
    </ul>
  </div>
  <img class = "allimage" src="Code.JPG" alt="a screenshot of some of the code for the mindcraft server" />
  <div class = "content">
    <h1>Code</h1>
    <p>
      I spent most of my life convinced that I had run out of time to learn how to
      code. The sheer number of programming languages out there, and the number
      of commands and syntax requirements for each one made any attempt to learn
      any programming language short lived.
      <br />
      <br />
      That is, until I met HTML. This website was the first major computer science
      project I have worked on, and served as an introduction to HTML, CSS, and
      Javascript. I have since worked with Python (writing a spam email sending script
      for ELFPAC), PHP and SQL (the Mindcraft server), and Java (at school). My goal
      is to be perfectly fluent in the following languages before college:
    </p>
      <ul>
        <li>Ruby on Rails (and Ruby on its own)</li>
        <li>C++ (with particular emphasis)</li>
        <li>C#</li>
        <li>Swift</li>
      </ul>
    <p>
      Before I continue, I would like to thank my friends, all of whom are incredibly
      talented, for helping me with programming. I am constantly amazed by the
      things these people can do with a computer.
    </p>
    <div id="style" class = "post">
      <h2>How To Style This Page</h2>
      <p>
        When writing about code, I really wanted to be able to include snippts
        that looked professional, like the ones from Stack Exchange. As it turns
        out, this is not hard to do at all!
        <br />
        <br />
        The code below is styled with <a href="http://prismjs.com/index.html">Prism</a>.
        This open source tool uses REGEX to highlight code in a huge array of
        languages. I styled the background to be smaller and added a container
        to keep it centered, and voila! Beautiful code.
      </p>
      <div class="codediv">
<pre><code class="language-python">def itworks():
  print("finally, wonderful styling for code")</code>
</pre>
</div>
      <p>
        There was some difficulty styling html, namely, this page is written in html
        so none of the tags showed up. I wrote this script in python to escape each
        open and close tag.
        </p>
<div class="codediv">
  <pre><code class="language-python">def parse(str):
      str = str.replace("<","&lt;")
      str = str.replace(">","&gt;")
      print(str);

  code = """&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;code&gt;
  &lt;p&gt;
    Here is a paragraph
  &lt;/p&gt;
&lt;/code&gt;
&lt;/body&gt;
&lt;/html&gt;"""

  parse(code)</code>
</pre>
</div>
      <p>
        Critical observers will note that the HTML shows up just fine here, that is
        because I ran the script on that snippet before pasting it in, to better
        show what the script looked like. Without escaping, html looks like this:
      </p>
<div class="codediv">
  <pre><code class="language-html"><!DOCTYPE html>
  <html>
  <head>
  </head>
  <body>
    <code>
      <p>
        Here is a paragraph
      </p>
    </code>
  </body>
  </html></code>
</pre>
</div>
    </div>
    <div id="obvious" class = "post">
      <h2>A Quick Note on Grammar</h2>
      <p>
        How often have you been waiting for some process on a command prompt with
        a live countdown where the unit for the count didn't match either the plural
        or singular form of the value? Here's an example:

        <img src="faultyiteration.JPG" alt="a countdown featuring impropper grammar" />

        As you can see, the second line ("the loop has been iterated 1 times") is
        painful to read. Here's my fix, and a challenge to anyone to try to find
        a solution which can be run faster.
      </p>
      <div class="codediv">
        <pre><code class="language-python">def counter(num):
  print("the loop has been iterated 0 times")
  print("the loop has been iterated 1 time")
  for i in range(2, num):
    print("the loop has been iterated " + str(i) + " times");

counter(10)</code>
</pre>
      </div>
      <img src="nice.JPG" alt="much better: the same count with propper grammar" />
      <p>
        As you can see, the output is now clear of any grammatical innacuracies. This
        is really a problem with english, not traditional programming, but it is
        satisfying to get right nonetheless.
      </p>
    </div>
    <div id="mindcraft" class = "post">
      <h2>Mindcraft Server</h2>
      <p>
        I work at a place called Mindcraft Makerspace, and recently a guy donated
        a couple of old MicroCenter servers to us. We were having problems with
        our signup/class management system, so we (myself and another employee)
        convinced our boss to let us write our own.
        <img src="server.jpg" alt="a microcenter server attached to a monitor" />

        We installed Ubuntu Server on the server, and connected a monitor and keyboard.
        The installation took much longer than it should have, because we didn't
        realize that the server was 32 bit! After installing the OS, we tried to
        install Webmin so that we could easily configure SSH, PHP, and SQL.
        <br />
        <br />
        The next problem we encountered was the screen size. For whatever reason,
        the server could not display a command prompt on our monitors because the
        screen was too large. Instead, we had to use a projector to view the screen.

        <img src="fauxscreen.jpg" alt="my friend working on the server" />

        Here you can see my friend working on installing Webmin. While he worked on
        configuring the hardware, I focused my efforts on writing software for
        replacing our signup system. We created an SQL database, which would be
        managed by PHP run by the server. This would allow us to view and edit class
        information both manually and through the website.
        <br />
        <br />
        At the center of the website was a calendar, which would be populated with
        PHP from a table containing class dates. I wrote the basic machinery of the
        calendar in Javascript:
      </p>
      <div class="codediv">
        <pre><code class="language-PHP">&lt;?php session_start() ?&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;link rel="stylesheet" type="text/css" href="styling.css" /&gt;
  &lt;script src="script.js" type = "text/javascript"&gt;&lt;/script&gt;
  &lt;title&gt;mindcraftsignup&lt;/title&gt;
  &lt;?php require "calendar.php"; ?&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Class Calendar&lt;/h1&gt;
  &lt;table id="calendar"&gt;
    &lt;tbody&gt;
      &lt;tr class="datelabel" id="sunday"&gt;
        &lt;td&gt;
          Sunday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $monclass;
      ?&gt;
      &lt;tr class="datelabel" id="monday"&gt;
        &lt;td&gt;
          Monday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $tueclass;
      ?&gt;
      &lt;tr class="datelabel" id="tuesday"&gt;
        &lt;td&gt;
          Tuesday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $wedclass;
      ?&gt;
      &lt;tr class="datelabel" id="wednesday"&gt;
        &lt;td&gt;
          Wednesday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $wedclass;
      ?&gt;
      &lt;tr class="datelabel" id="thursday"&gt;
        &lt;td&gt;
          Thursday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $wedclass;
      ?&gt;
      &lt;tr class="datelabel" id="friday"&gt;
        &lt;td&gt;
          Friday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $friclass;
      ?&gt;
      &lt;tr class="datelabel" id="saturday"&gt;
        &lt;td&gt;
          Saturday
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;?php
      echo $satclass;
      ?&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;div id="buttons"&gt;
    &lt;div id="nextweek"&gt;
      Next Week
    &lt;/div&gt;
    &lt;div id="prevweek"&gt;
      Previous Week
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code>
</pre>
      </div>
      <div class="codediv">
        <pre><code class="language-javascript">var today = new Date();
  var ndate = today.getDate();
  var weeksahead = 0;

  var month = new Array();
  month[0] = "January";
  month[1] = "February";
  month[2] = "March";
  month[3] = "April";
  month[4] = "May";
  month[5] = "June";
  month[6] = "July";
  month[7] = "August";
  month[8] = "September";
  month[9] = "October";
  month[10] = "November";
  month[11] = "December";

  function adday(tod, num){
    tod.setDate(tod.getDate() + num);
    return(tod);
  }

  function refresh(sunday){
    document.getElementById("sunday").innerHTML =
    ("<td>Sunday, " + month[sunday.getMonth()] + " " + sunday.getDate() + "</td>");
    var day = adday(sunday, 1)
    document.getElementById("monday").innerHTML =
    ("<td>Monday, " + month[day.getMonth()] + " " + day.getDate() + "</td>");
    var day = adday(sunday, 1)
    document.getElementById("tuesday").innerHTML =
    ("<td>Tuesday, " + month[day.getMonth()] + " " + day.getDate() + "</td>");
    var day = adday(sunday, 1)
    document.getElementById("wednesday").innerHTML =
    ("<td>Wednesday, " + month[day.getMonth()] + " " + day.getDate() + "</td>");
    var day = adday(sunday, 1)
    document.getElementById("thursday").innerHTML =
    ("<td>Thursday, " + month[day.getMonth()] + " " + day.getDate() + "</td>");
    var day = adday(sunday, 1)
    document.getElementById("friday").innerHTML =
    ("<td>Friday, " + month[day.getMonth()] + " " + day.getDate() + "</td>");
    var day = adday(sunday, 1)
    document.getElementById("saturday").innerHTML =
    ("<td>Saturday, " + month[day.getMonth()] + " " + day.getDate() + "</td>");
    }

    function nextweek(){
      weeksahead++;
      var adate = new Date();
      adate.setDate(adate.getDate() + (7 * weeksahead));
      refresh(adate);
    }

    function prevweek(){
      weeksahead--;
      var adate = new Date();
      adate.setDate(adate.getDate() + (7 * weeksahead));
      refresh(adate);
    }

  window.onload = function(){
    refresh(today);

    document.getElementById("nextweek").addEventListener("click",nextweek);
    document.getElementById("prevweek").addEventListener("click",prevweek);
  }
        </code>
</pre>
      </div>
      <p>
        Here is the site, in all of its glory:
      </p>
      <div class="iframecont">
        <iframe src="calendar.html"></iframe>
      </div>
      <p>
        You can see where the PHP loaded class data into the calendar, and the use
        of setDate() means that the calendar can take leap years and weeks spanning
        months into account. Simple and elegant.
        <br />
        <br />
        Now for the complicated stuff. Here is the PHP for the signup page:
      </p>
      <div class="codediv">
        <pre><code class="language-PHP">&lt;?php session_start()?&gt;
&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Mindcraft Signup&lt;/title&gt;
  &lt;link rel="stylesheet" type="text/css" href="signup.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;?php
  $servername = "Server_Name";
  $servusername = "server_username";
  $servpassword = "server_password";
  try{
    $conn = new PDO("mysql:host=$servername;dbname=satanface", $servusername, $servpassword);
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  }
  catch(PDOException $e){
    $feedback = "fail" . $e-&gt;getMessage();
  }

  if(isset($_POST['submit'])){
    $userfirstname = mysqli_real_escape_string($_POST['firstname']);
    $userlastname = mysqli_real_escape_string($_POST['lastname']);
    $useremail = mysqli_real_escape_string($_POST['email']);
    $userphone = mysqli_real_escape_string($_POST['phone']);
    $useraltphone = mysqli_real_escape_string($_POST['altphone']);
    $useraddress = mysqli_real_escape_string($_POST['address']);
    $newuserpasswd = password_hash(mysqli_real_escape_string($_POST['password']));
    $confuserpassword = mysqli_real_escape_string($_POST['confpassword']);
    $query = "INSERT INTO parents (firstname, lastname, phone, alt_phone, address, email, passhash)
    VALUES ({$userfirstname},{$userlastname},{$userphone},{$useraltphone},{$useraddress},
      {$useremail},{$newuserpasswd});"
    if(password_verify($newuserpassword, $confuserpassword)){
      $confuserpassword = "";
      try{
        $sqlquery = $conn-&gt;prepare($query);
        $stmt-&gt;execute();
        $feedback = "your information has been recorded";
      } catch{
        $feedback = "fatal database error"
      }
    }
    else{
      $confuserpassword = "";
      alert "passwords do not match";
    }

  }
  ?&gt;
  &lt;h2&gt;Sign Up&lt;/h2&gt;
  &lt;div id="signuppopup"&gt;
    &lt;form method="post" action="&lt;?php echo htmlspecialchars($_SERVER['PHP_SELF'])?&gt;"&gt;
      &lt;label&gt;Your First Name &lt;input name="firstname" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Your Last Name &lt;input name="lastname" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Email &lt;input name="email" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Phone Number &lt;input name="phone" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Alternative Phone Number &lt;input name="altphone" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Address &lt;input name="address" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Password &lt;input name="password" type="text" required /&gt;&lt;/label&gt;
      &lt;label&gt;Confirm Password &lt;input name="confpassword" type="text" required /&gt;&lt;/label&gt;

      &lt;button name="submit" type="submit"&gt;Sign Up&lt;/button&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
        </code>
</pre>
      </div>
      <p>
        This page was the absolute simplest I could create. When a user clicks submit,
        the data in the form fields is checked for SQL injection, and added to the
        database. Here is the Sign In page:
      </p>
      <div class="codediv">
        <pre><code class="language-PHP">&lt;?php session_start() ?&gt;
&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Mindcraft Login&lt;/title&gt;
  &lt;link rel="stylesheet" type="text/css" href="login.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;?php
  $servername = "server_name";
  $servusername = "server_username";
  $servpassword = "server_password";
  $message = " ";
  try{
    $conn = new PDO("mysql:host=$servername;dbname=satanface", $servusername, $servpassword);
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  }
  catch(PDOException $e){
    echo "fail" . $e-&gt;getMessage();
  }

  if (isset($_POST['submitlogin']) && !empty($_POST['username']) && !empty($_POST['password'])){
    $usename = mysqli_real_escape_string($_POST('username'));
    $password = mysqli_real_escape_string($_POST('password'));
    try{
      $userquery = $conn-&gt;prepare("SELECT passhash FROM parents WHERE email = " + $usename);
      $stmt-&gt;execute();
      $userdata = $stmt-&gt;setFetchMode(PDO::FETCH_ASSOC);
    } catch{
      $message .= " That user does not exist";
    }
    if (password_verify($password,$userdata)) {
      $_SESSION['login'] = true;
      $_SESSION['username'] = $username;
    }
    else{
      $message .= " Sorry, your username or password is invalid";
    }

  }

  ?&gt;
  &lt;h2&gt;Sign In&lt;/h2&gt;
  &lt;form method ="post" action="&lt;?php echo htmlspecialchars($_SERVER['PHP_SELF'])?&gt;"&gt;
    &lt;div class="loginsignup"&gt;
      &lt;label&gt;
        &lt;b&gt;Username&lt;/b&gt;
        &lt;input type="text" placeholder="Username" name="username" required/&gt;
      &lt;/label&gt;

      &lt;label&gt;
        &lt;b&gt;Password&lt;/b&gt;
        &lt;input type="password" placeholder="Password" name="password" required/&gt;
      &lt;/label&gt;

      &lt;button name="submitlogin" type="submit"&gt;Login&lt;/button&gt;

      &lt;label&gt;&lt;input type="checkbox" check="remember" name="remember" /&gt;Stay Logged In&lt;/label&gt;
    &lt;/div&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
        </code>
</pre>
      </div>
      <p>
        All of the other PHP on the site looks like this as well. Four days into
        the project, my boss decided that it was too complicated and the servers
        were scrapped, however, I will certainly be using what I have learned to
        develop better distributed systems.
      </p>
    </div>
    <div id="kandao" class = "post">
      <h2>kandao (看到)</h2>
      <p>
        This is my first practical programming task. In my Chinese class, we use
        a wonderufl website called <a href="http://www.wlangames.net/Chang3.php?Student=Special%20Guest">
        World Language Games</a>. Every week, we have to earn a certain number of points
        for homework, but those of us who wanted to learn to write the characters by
        hand (it does seem strange that that wasn't required in the first place) found
        ourselves doing twice as much, because there was no way to practice handwriting
        on World Language Games.
        <br />
        <br />
        So I set about making 看到 (Pinyin:kàn'dào, English: See and Understand), which I
        planned to send to the creator of World Language Games in the hopes that he
        would integrate it with his website. This project was started before I knew
        anything about Javascript, so it was a good 5 months before I felt confident
        enough to really begin working on it.
        <br />
        <br />
        World Language Games is written in PHP, which made perfect integration impossible
        because it is invisible to the client, but I figured that I could make it
        as compatible as possible by keeping all important data in global variables
        written at the very beginning of the page.
        <br />
        <br />
        My first attempt was at brute force: by overlaying two HTML canvases, I could
        print the desired character on one and have the user write on the other, then
        find the percentage of matching pixels. Here is that implementation:
      </p>

<div class="codediv">
  <pre><code class="language-HTML">&lt;!DOCTYPE html&gt;
&lt;html &gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Character Writing&lt;/title&gt;
  &lt;/head&gt;
  &lt;body style="background-color:#fff9bdff;"&gt;
    &lt;table width="100%" style="border: 1px solid black; text-align:center;"&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;h1&gt;Character Writing (Online)&lt;/h1&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;p&gt;kàn'dào (to see and understand)&lt;/p&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;div id="check"&gt;View Character&lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    &lt;div id="paint"&gt;
      &lt;canvas id="myCanvas"&gt;&lt;/canvas&gt;
    &lt;/div&gt;
    &lt;div id="reference"&gt;
      &lt;canvas id="refcanvas"&gt;&lt;/canvas&gt;
    &lt;/div&gt;
    &lt;img id="background" src="background.png" alt="stroke order background" /&gt;
    &lt;div class="scriptdiv"&gt;
      &lt;script&gt;
      var back = document.getElementById("background");
      back.style.positon = "absolute";
      back.height = back.width =  window.innerHeight/1.7;
      back.style.top = (document.getElementById("myCanvas").offsetTop) + "px";
      back.style.left = ((window.innerWidth - (window.innerHeight/1.7))/2) + "px";
      &lt;/script&gt;
    &lt;/div&gt;
    &lt;table width="100%" style="border: 1px solid black; text-align:center;"&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;div id="clear"&gt;Clear Drawing&lt;/div&gt;
          &lt;div id="evaluate" onclick="countempixls()"&gt;Evaluate&lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/body&gt;
  &lt;div class="stylediv"&gt;
    &lt;style&gt;
    .stylediv, .scriptdiv{
      display:none;
    }
    #refcanvas{
      position:absolute;
      display:none;
    }
    #background{
      position:absolute;
      z-index:-1;
    }
    &lt;/style&gt;
  &lt;/div&gt;
  &lt;div class="scriptdiv"&gt;
    &lt;script&gt;
    function countempixls(){
      console.log("evaluating");
      var refim = document.getElementById("refcanvas").getContext("2d").getImageData(0,0,window.innerWidth,(window.innerHeight/1.7));
      var subim = document.getElementById("myCanvas").getContext("2d").getImageData(0,0,window.innerWidth,(window.innerHeight/1.7));
      var matchcount = 1;
      var misscount = 1;
      for(i = 0; i&lt;=refim.data.length; i++){
        if(refim.data[i] == subim.data[i]){
          matchcount++;
        }
        else{
          misscount++;
        }
      }
      console.log(matchcount);
      console.log(misscount);
      alert((matchcount/misscount) + " percent accuracy");
      console.log(matchcount/misscount);
    }
    &lt;/script&gt;
    &lt;script&gt;
    var ref = document.getElementById("refcanvas");
    ref.style.top = document.getElementById("myCanvas").offsetTop + "px";
    var toggle = function(){
      if(ref.style.display == "none"){
        ref.style.display = "block";
      }
      else{
        ref.style.display = "none";
      }
    }
    document.getElementById("check").addEventListener("click", toggle);
    &lt;/script&gt;
    &lt;script&gt;
    window.onload = function(){
      var pcanv = document.getElementById("myCanvas");
      var rcanv = document.getElementById("refcanvas");
      var ctd = pcanv.getContext("2d");
      var ctx = rcanv.getContext("2d");
      pcanv.width = rcanv.width = window.innerWidth;
      pcanv.height = rcanv.height = (window.innerHeight/1.7)
      ctx.font = (window.innerHeight/1.8) + "px Verdana";
      ctx.textAlign="center";
      var hormid = window.innerWidth/2;
      var vertmid = document.getElementById("myCanvas").height/1.2;
      ctx.fillText("好", hormid, vertmid);
    }
    &lt;/script&gt;
    &lt;script&gt;
    var dcanvas = document.getElementById('myCanvas');
    var clear = document.getElementById('clear');
    var image = document.getElementById('image');
    var dtx = dcanvas.getContext('2d');
    var painting = document.getElementById('paint');
    var paint_style = getComputedStyle(painting);
    var mouse = {x: 0, y: 0};
    dcanvas.addEventListener('mousemove', function(e) {
      mouse.x = e.pageX - this.offsetLeft;
      mouse.y = e.pageY - this.offsetTop;
    }, false);
    dcanvas.addEventListener('mousedown', function(e) {
        dtx.beginPath();
        dtx.moveTo(mouse.x, mouse.y);
        dcanvas.addEventListener('mousemove', onPaint, false);
    }, false);
    dcanvas.addEventListener('mouseup', function() {
        dcanvas.removeEventListener('mousemove', onPaint, false);
    }, false);
    clear.addEventListener('mouseup', function() {
      dtx.clearRect(0, 0, dcanvas.width, dcanvas.height);
    });
    function drawingCallback(data) {
      console.log(data)
    }
    function httpGet(theUrl, data, callback) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                callback(xmlHttp.responseText);
        }
        xmlHttp.open("GET", theUrl + "?" + data, true); // true for asynchronous
        xmlHttp.send(null);
    }
    var onPaint = function() {
        dtx.lineWidth = 15;
        dtx.lineJoin = 'round';
        dtx.lineCap = 'round';
        dtx.strokeStyle = '#000000';
        dtx.lineTo(mouse.x, mouse.y);
        dtx.stroke();
    }
  &lt;/script&gt;
  &lt;/div&gt;
&lt;/html&gt;</code>
</pre>
</div>
      <p>
        This document is styled to match the format of World Language Games as perfectly
        as possible. As such, the design and formatting is the exclusinve intellectual
        property of the creator of World Language Games.
        <br />
        <br />
        Here is an iFrame running that code:
      </p>
      <div class="iframecont">
        <iframe src="firstkandao.html"></iframe>
      </div>
      <p>
        As you can see, it didn't work. There were two huge problems with this approach.
        The first was that it was almost impossible to line up the character with
        the reference in the back (seriously, try it!). Second, after drawing a character,
        the percent accuracy decreases drastically because there are almost always
        more pixels that miss than that actually overlap with the text.
        <br />
        <br />
        I set about looking for an off-the-shelf alternative, and my friend suggested
        OCR software, so I tried that. The following Javascript replaced the function
        "countempixls", and used an XMLHttpRequest to contact and use an OCR API called
        ocr.space.
      </p>
      <div class="codediv">
        <pre><code class="language-Javascript">function countempixls(){
     var subim = document.getElementById("myCanvas").toDataURL();
     var trsubim = subim.slice(22);
     var response;
     var xhttp = new XMLHttpRequest();
     xhttp.onreadystatechange = function(){
       if(this.readyState == 4 && this.status == 200){
         response = this.response;
         console.log(response);
       }
     }
     var jsonfile = {"base64Image":trsubim, "language":"chs"};
     console.log(jsonfile);
     xhttp.open("POST", "https://api.ocr.space/parse/image", true);
     xhttp.setRequestHeader("apikey", "a4aaf5477788957");
     xhttp.send(jsonfile);
   }
        </code>
      </pre>
      </div>
      <p>
        This didn't work either. The OCR software could not process handwriten images,
        even when I tried using the demo on their page. It would read the image, and
        return that it had found no text.
        <br />
        <br />
        After these failures, I was desperate for something that worked every time.
        That is when I found <a href="https://github.com/gugray/HanziLookupJS">HanziLookupJS</a>,
        a library from github user "gugray" that was adapted from <a href="http://kiang.org/jordan/software/hanzilookup">software by Jordan Kiang</a>.
        This software uses an enormous array of radicals that it can piece together
        into Chinese characters to provide an astonishingly accurate guess of the
        character you are writing.
        <br />
        <br />
        After an afternoon of tinkering, I had modified it to fit in World Language Games, and
        set it up to evaluate characters as opposed to recognising them. The only
        truly major changes that I made were stylistic. Here is the result:
      </p>
      <div class="iframecont">
        <iframe src="finalkandao.html"></iframe>
      </div>
      <p>
        I won't post the code here, because it is all available at <a href="https://github.com/hansgaensbauer/kandao">GitHub</a>.
        It is now ready to be presented to the creator of World Language Games, more on
        that soon.
      </p>
    </div>
  </div>
</body>
</html>
